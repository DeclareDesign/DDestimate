---
title: "Regression Tables with estimatr"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

Preparing regression tables with estimatr is possible with all of the major r-to-LaTeX packages, including `texreg`, `stargazer`, `xtable` and `huxtable`.

## Setup

First we'll load both `estimatr` and `magrittr` (for pipes).

```{r}
library(estimatr)
library(magrittr)
```

## Texreg

Texreg operates directly on an `lm_robust` object. If you would like standard errors instead of confidence intervals, use `include.ci = FALSE`.

```{r, message = FALSE}
library(texreg)
fit <- lm_robust(mpg ~ disp, data = mtcars)
texreg(fit, include.ci = FALSE)
```

## Stargazer

Stargazer has to be *tricked* -- there's unfortunately no way around this unless something in the stargazer package changes. The maintainer has indicated that he has no active plans to update stargazer in the future. First, run the regression using `lm`.  Then process the `lm` fit with `commarobust`, which is a helper function that lets you specify the kind of standard errors you want (robust HC2 SEs are the default in both `lm_robust` and `commarobust`).  Then you pass the `lm` fit to stargazer and then pass `starprep(fit_r)` to the `se` argument in `stargazer`. This process works great with multiple fits.

```{r, eval=FALSE}
library(stargazer)
fit_1 <- lm(mpg ~ disp, data = mtcars)
fit_2 <- lm(mpg ~ hp, data = mtcars)
fit_1_r <- commarobust(fit_1)
fit_2_r <- commarobust(fit_2)
stargazer(fit_1, fit_2, se = starprep(fit_1_r, fit_2_r))
```

## xtable

`xtable` works directly on a data.frame, so we just have to prep the `lm_robust` output with the `tidy` function.

```{r}
library(xtable)
fit <- lm(mpg ~ disp, data = mtcars)
fit %>% tidy %>% xtable()
```

## huxtable

`huxtable`, too, works on a data.frame, so all we have to do is prep with `tidy`.

```{r, message=FALSE}
library(huxtable)
fit <- lm(mpg ~ disp, data = mtcars)
fit %>% tidy %>% hux() %>% print_latex()
```



